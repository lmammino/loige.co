---
import { sortByFrontmatterDate, PAGE_SIZE } from '../utils/posts'
import type { PostType } from '../utils/posts'

import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import BlogList from '../components/BlogList.astro'

const posts = await Astro.glob<PostType>('../../content/posts/**/*.(md|mdx)')
posts.sort(sortByFrontmatterDate)
const lastPage = Math.ceil(posts.length / PAGE_SIZE)
const currentPage = 1
const nextPage = 2
posts.splice(PAGE_SIZE) // keeps only the items for the first page
---

<Layout title="Luciano's blog">
  <Header slot="header" section="blog" />
  <Footer slot="footer" />
  <BlogList
    posts={posts}
    currentPage={currentPage}
    lastPage={lastPage}
    nextPage={nextPage}
  />
</Layout>
